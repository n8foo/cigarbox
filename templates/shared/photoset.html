{% extends "layout.html" %}

{# Set Open Graph variables for social media preview #}
{% set og_title = 'Shared Photoset: ' + photoset.title %}
{% set og_url = request.url %}
{% set og_description = photoset.description or 'A shared photoset from CigarBox' %}

{% block body %}

<div class="row">
  <div class="col-md-12">
    <h1>{{ photoset.title }}</h1>
    {% if photoset.description %}
    <p class="lead">{{photoset.description}}</p>
    {% endif %}
    {% if date_range %}
    <p class="text-muted" style="font-size: 16px; margin-top: -10px; margin-bottom: 5px;">
      <span class="bi bi-calendar"></span> {{ date_range }}
    </p>
    {% endif %}
  </div>
</div>
<hr>

<div class="justified-gallery" id="photo-grid">
  {% for photo in photos %}
  <div class="jg-item-wrapper">
    <a href="{{SITEURL}}/shared/photoset/{{ share_token.token }}/photo/{{ photo.id }}" class="jg-item">
      <img class="lazy jg-photo"
           data-src="{{ signed_s3_url(photo.uri, '_c') }}"
           src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='320' height='240'%3E%3Crect fill='%23eee' width='320' height='240'/%3E%3C/svg%3E"
           alt="Photo {{ photo.id }}">
    </a>
  </div>
  {% else %}
  <p class="text-muted">No photos in this photoset.</p>
  {% endfor %}
</div>

<!-- Lazy loading for images -->
<script src="{{SITEURL}}/static/js/lazy-loading.js"></script>

{% endblock %}
