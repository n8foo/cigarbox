/*
 * CigarBox Custom Theme
 * Dark mode support via data-bs-theme attribute
 */

/* Light mode (default) */
[data-bs-theme="light"] body,
body:not([data-bs-theme]) {
  background-color: #ffffff !important;
  color: #212529 !important;
}

/* Dark mode */
[data-bs-theme="dark"] body {
  background-color: #1a1a1a !important;
  color: #e0e0e0 !important;
}

[data-bs-theme="dark"] {

  /* Reduce photo brightness for comfortable viewing in dark mode */
  img {
    filter: brightness(0.85);
  }

  /* Dark navbar override */
  .navbar-light {
    background-color: #2d2d2d !important;
  }

  .navbar-light .navbar-brand,
  .navbar-light .navbar-nav .nav-link {
    color: rgba(255, 255, 255, 0.85) !important;
  }

  .navbar-light .navbar-nav .nav-link:hover,
  .navbar-light .navbar-nav .nav-link:focus {
    color: rgba(255, 255, 255, 1) !important;
  }

  .navbar-light .navbar-toggler {
    border-color: rgba(255, 255, 255, 0.1);
  }

  .navbar-light .navbar-toggler-icon {
    filter: invert(1);
  }

  /* Dropdown menus in dark mode */
  .dropdown-menu {
    background-color: #2d2d2d !important;
    border-color: #404040 !important;
  }

  .dropdown-item {
    color: rgba(255, 255, 255, 0.85) !important;
  }

  .dropdown-item:hover,
  .dropdown-item:focus {
    background-color: #404040 !important;
    color: rgba(255, 255, 255, 1) !important;
  }

  /* Thumbnail/card backgrounds */
  .thumbnail,
  .card {
    background-color: #2d2d2d !important;
    border-color: #404040 !important;
  }

  /* Form controls */
  .form-control,
  .form-select,
  textarea.form-control {
    background-color: #2d2d2d !important;
    border-color: #404040 !important;
    color: #e0e0e0 !important;
  }

  .form-control:focus,
  .form-select:focus {
    background-color: #2d2d2d !important;
    border-color: #666 !important;
    color: #e0e0e0 !important;
  }

  /* Input groups */
  .input-group-text {
    background-color: #2d2d2d !important;
    border-color: #404040 !important;
    color: #e0e0e0 !important;
  }

  /* Tables */
  .table {
    color: #e0e0e0 !important;
  }

  .table-striped > tbody > tr:nth-of-type(odd) > * {
    background-color: rgba(255, 255, 255, 0.05) !important;
  }

  /* Modals - CRITICAL FIX */
  .modal-content {
    background-color: #2d2d2d !important;
    border-color: #404040 !important;
    color: #e0e0e0 !important;
  }

  .modal-header,
  .modal-footer {
    border-color: #404040 !important;
  }

  .modal-title {
    color: #e0e0e0 !important;
  }

  .modal-body {
    color: #e0e0e0 !important;
  }

  /* Buttons in modals */
  .btn-secondary {
    background-color: #404040 !important;
    border-color: #666 !important;
    color: #e0e0e0 !important;
  }

  .btn-secondary:hover {
    background-color: #4d4d4d !important;
    border-color: #808080 !important;
  }

  /* Alerts */
  .alert-success {
    background-color: #1e3a1e !important;
    border-color: #2d5a2d !important;
    color: #8fd08f !important;
  }

  /* Pagination */
  .page-link {
    background-color: #2d2d2d !important;
    border-color: #404040 !important;
    color: #e0e0e0 !important;
  }

  .page-link:hover {
    background-color: #404040 !important;
    border-color: #666 !important;
    color: #fff !important;
  }

  .page-item.active .page-link {
    background-color: #0d6efd !important;
    border-color: #0d6efd !important;
  }

  .page-item.disabled .page-link {
    background-color: #2d2d2d !important;
    border-color: #404040 !important;
    color: #6c757d !important;
  }

  /* Text colors */
  .text-muted {
    color: #a0a0a0 !important;
  }

  /* Help text */
  .help-block,
  .form-text {
    color: #a0a0a0 !important;
  }

  /* Labels in dark mode */
  .form-label,
  label {
    color: #e0e0e0 !important;
  }
}

/* Compact UI - reduce spacing throughout */
body {
  font-size: 14px;
}

/* Tighter navbar */
.navbar {
  padding: 0.25rem 1rem;
  min-height: 40px;
}

.navbar-brand {
  font-size: 1.1rem;
  padding: 0.25rem 0;
}

.navbar-nav .nav-link {
  padding: 0.25rem 0.75rem;
}

/* Compact container padding */
.container,
.container-fluid {
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
}

/* Tighter row spacing */
.row {
  margin-bottom: 0.5rem;
}

/* Compact headings */
h1 {
  font-size: 1.75rem;
  margin-bottom: 0.5rem;
}

h2 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
}

h3 {
  font-size: 1.25rem;
  margin-bottom: 0.5rem;
}

h4 {
  font-size: 1.1rem;
  margin-bottom: 0.5rem;
}

/* Compact breadcrumbs */
.breadcrumb {
  padding: 0.5rem 0.75rem;
  margin-bottom: 0.5rem;
  font-size: 0.9rem;
}

.breadcrumb-item + .breadcrumb-item::before {
  padding-right: 0.35rem;
  padding-left: 0.35rem;
}

/* Compact buttons */
.btn {
  padding: 0.25rem 0.75rem;
  font-size: 0.9rem;
}

.btn-lg {
  padding: 0.4rem 1rem;
  font-size: 1rem;
}

.btn-sm {
  padding: 0.15rem 0.5rem;
  font-size: 0.8rem;
}

/* Compact button groups */
.btn-group {
  gap: 0.25rem;
}

/* Tighter photo grid */
.thumbnail {
  margin-bottom: 0.75rem;
  padding: 0.25rem;
}

.thumbnail .caption {
  padding: 0.5rem;
}

/* Compact photo info */
.photo-info {
  padding: 0.5rem;
  margin-bottom: 0.5rem;
}

/* Tighter pagination */
.pagination {
  margin: 0.5rem 0;
}

.page-link {
  padding: 0.25rem 0.5rem;
  font-size: 0.9rem;
}

/* Compact modals */
.modal-header {
  padding: 0.75rem 1rem;
}

.modal-body {
  padding: 0.75rem 1rem;
}

.modal-footer {
  padding: 0.5rem 1rem;
}

.modal-title {
  font-size: 1.1rem;
}

/* Compact forms */
.form-group {
  margin-bottom: 0.75rem;
}

.form-control,
.form-select {
  padding: 0.25rem 0.5rem;
  font-size: 0.9rem;
}

.form-label {
  margin-bottom: 0.25rem;
  font-size: 0.9rem;
}

.form-text,
.help-block {
  font-size: 0.85rem;
  margin-top: 0.15rem;
}

/* Compact nav pills (admin menu) */
.nav-pills {
  margin-bottom: 0.5rem;
}

.nav-pills .nav-link {
  padding: 0.35rem 0.75rem;
  font-size: 0.9rem;
}

/* Compact tables */
.table {
  font-size: 0.9rem;
}

.table th,
.table td {
  padding: 0.5rem;
}

/* Compact panels/cards */
.panel,
.card {
  margin-bottom: 0.75rem;
}

.panel-heading,
.card-header {
  padding: 0.5rem 0.75rem;
}

.panel-body,
.card-body {
  padding: 0.75rem;
}

.panel-title {
  font-size: 1rem;
}

/* Compact alerts */
.alert {
  padding: 0.5rem 0.75rem;
  margin-bottom: 0.75rem;
  font-size: 0.9rem;
}

/* Tighter badge spacing */
.badge {
  padding: 0.25em 0.5em;
  font-size: 0.8rem;
}

/* Reduce hr thickness */
hr {
  margin: 0.75rem 0;
}

/* Compact lead text */
.lead {
  font-size: 1.1rem;
  margin-bottom: 0.5rem;
}

/* Simple Gallery Layout - CSS Grid */
.justified-gallery {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 4px;
  width: 100%;
}

.jg-item {
  display: block;
  text-decoration: none;
  overflow: hidden;
  aspect-ratio: 4/3;
}

.jg-photo {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Loading state for images */
.jg-photo.lazy {
  background: #f0f0f0;
}

[data-bs-theme="dark"] .jg-photo.lazy {
  background: #2d2d2d;
}

/* Ensure gallery container doesn't have extra spacing */
.justified-gallery + .pagination {
  margin-top: 1rem;
}

/* Wrapper for photoset items with checkboxes */
.jg-item-wrapper {
  display: block;
  position: relative;
}

.jg-item-wrapper .jg-item {
  display: block;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .justified-gallery {
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  }
}
